[
  {
    "objectID": "index.html",
    "href": "index.html",
    "title": "Singapore Property Market Analysis",
    "section": "",
    "text": "1 Introduction\nSingapore’s property market is an extremely interesting case study due to its unique characteristics and the government’s active role in regulating it. Roughly 8 in 10 Singaporeans live in public housing known as Housing and Development Board (HDB) flats, which are subsidized apartments sold on a 99-year leasehold basis. This system was established to provide quality housing at an affordable price for the majority of the population, a goal it has generally accomplished over the years, with over an over 90% home ownership rate in Singapore. However, despite the government’s efforts to maintain affordability and market stability, price dynamics continue to vary significantly across regions, flat types, and lease duration, leading to ongoing debates about housing affordability. Our project aims to analyze the factors influencing HDB resale prices, analyzing the general trend of rising prices, the impact of location, flat type, and lease duration on resale prices, and the various geopolitical and policy factors that have influenced these trends over time.\nFor a reader who is unfamiliar with Singapore’s housing system, we will contrast it with New York City (NYC). While NYC is a global metropolis with a predominantly market-driven housing market, where only about 4% of units are public housing. Singapore is almost the opposite: approximately 80% of resident households live in HDB public flats. This means that Singapore’s resale market plays a far larger economic and social role than the resale of public units in New York. Moreover, unlike NYC homes, Singapore’s HDB flats are sold on 99-year leases, creating measurable “lease decay” that affects resale prices. These structural differences explain why our analysis focuses on public housing data and why patterns such as location premiums, million-dollar flats, and lease-related depreciation emerge so clearly in Singapore, but not in markets like New York. In Singapore, public housing is the norm. In NYC, public housing is the safety net.",
    "crumbs": [
      "<span class='chapter-number'>1</span>  <span class='chapter-title'>Introduction</span>"
    ]
  },
  {
    "objectID": "data.html",
    "href": "data.html",
    "title": "2  Data",
    "section": "",
    "text": "2.1 Description\nOur project uses two complementary datasets from Singapore’s Housing & Development Board (HDB): Dataset 1 — Median Resale Prices by Town, Quarter, and Flat Type (https://data.gov.sg/datasets/d_b51323a474ba789fb4cc3db58a3116d4/view) Dataset 2 — Transaction-Level Resale Flat Prices (2017–Present) https://data.gov.sg/datasets/d_8b84c4ee58e3cfc0ece0d773c8ca6abc/view\nBoth datasets are provided by the Housing and Development Board (HDB), an official government statutory board of Singapore. Whenever a flat is resold, an official resale application is filed with HDB and this data is then recorded and made publicly available online. Both datasets are updated quarterly, and we will focus on data from the past 5-10 years to capture recent trends and the impact of government cooling measures.\nAlthough both sources relate to resale flat prices, they serve different analytical purposes, and using them together enables a more complete understanding of price dynamics. The first dataset provides aggregated median resale prices by town, quarter, and flat type, allowing us to analyze broad trends and patterns over time. The second dataset contains transaction-level data, which includes detailed information on each individual transaction instead of an aggregated value for the town. Crucially, the second dataset includes additional variables such as block number, approximate level of flat, floor area and lease remaining (Singapore’s public housing is typically sold on a 99-year leasehold). This granularity allows us to quantify micro-level factors influencing resale prices, such as the impact of lease duration or floor level on pricing.",
    "crumbs": [
      "<span class='chapter-number'>2</span>  <span class='chapter-title'>Data</span>"
    ]
  },
  {
    "objectID": "data.html#missing-value-analysis",
    "href": "data.html#missing-value-analysis",
    "title": "2  Data",
    "section": "2.2 Missing value analysis",
    "text": "2.2 Missing value analysis\nAt first glance, the first dataset appears to have NA and “-” to indicate missing values. This likely represents represents “Not Applicable/Not Available” and “No Transactions” respectively. The NA value likely means that these type of flats are not available for purchase in those neighbourhoods (Bishan & 1-Room Flats) and the “-” could mean that there are flats available but no purchases were made.\nThe second dataset appears to be cleaner with no obvious missing values. However, we will conduct a thorough missing value analysis and data cleaning process to ensure data integrity before proceeding with our analysis.\n\n\nCode\n# Load necessary libraries\nlibrary(tidyverse)\n\n\nWarning: package 'lubridate' was built under R version 4.5.2\n\n\n── Attaching core tidyverse packages ──────────────────────── tidyverse 2.0.0 ──\n✔ dplyr     1.1.4     ✔ readr     2.1.5\n✔ forcats   1.0.0     ✔ stringr   1.5.2\n✔ ggplot2   4.0.0     ✔ tibble    3.3.0\n✔ lubridate 1.9.4     ✔ tidyr     1.3.1\n✔ purrr     1.1.0     \n── Conflicts ────────────────────────────────────────── tidyverse_conflicts() ──\n✖ dplyr::filter() masks stats::filter()\n✖ dplyr::lag()    masks stats::lag()\nℹ Use the conflicted package (&lt;http://conflicted.r-lib.org/&gt;) to force all conflicts to become errors\n\n\nCode\nlibrary(sf)\n\n\nWarning: package 'sf' was built under R version 4.5.2\n\n\nLinking to GEOS 3.13.1, GDAL 3.11.4, PROJ 9.7.0; sf_use_s2() is TRUE\n\n\nCode\nlibrary(lubridate)\nlibrary(naniar)\n\n\nWarning: package 'naniar' was built under R version 4.5.2\n\n\nCode\n# 1. Load the first Dataset: Median Resale Prices by Town, Quarter, and Flat Type\ndf_median_resale &lt;- read_csv(\"datasets/MedianResalePricesforRegisteredApplicationsbyTownandFlatType.csv\", \n               na = c(\"na\", \"-\", \"NA\"))\n\n\nRows: 11388 Columns: 4\n── Column specification ────────────────────────────────────────────────────────\nDelimiter: \",\"\nchr (3): quarter, town, flat_type\ndbl (1): price\n\nℹ Use `spec()` to retrieve the full column specification for this data.\nℹ Specify the column types or set `show_col_types = FALSE` to quiet this message.\n\n\nCode\n# Load Singapore Geospatial Data (Planning Areas)\n# We use a public GeoJSON link for Singapore Planning Areas\n# If this link fails, you can download \"Master Plan 2019 Planning Area Boundary\" from data.gov.sg\ngeojson_url &lt;- \"https://raw.githubusercontent.com/yinshanyang/singapore/master/maps/2-planning-area.geojson\"\nsg_map &lt;- st_read(geojson_url, quiet = TRUE) |&gt;\n  mutate(name = toupper(name)) # Standardize map names to Uppercase\n\n# 2. Check for Missing Values\nmissing_summary_median &lt;- df_median_resale |&gt;\n  summarise(across(everything(), ~ sum(is.na(.)), .names = \"missing_{col}\"))\nprint(missing_summary_median)\n\n\n# A tibble: 1 × 4\n  missing_quarter missing_town missing_flat_type missing_price\n            &lt;int&gt;        &lt;int&gt;             &lt;int&gt;         &lt;int&gt;\n1               0            0                 0          6128\n\n\nCode\n# 3. Clean Dataset\ndf_median_clean &lt;- df_median_resale |&gt;\n  mutate(\n    # Convert 'price' to numeric (this handles any remaining non-numeric values)\n    price = as.numeric(price),\n    # Convert 'quarter' (e.g., \"2007-Q2\") to a Date object\n    date = yq(quarter),\n    # Standardize town names to uppercase\n    town = toupper(town)\n  )\n# 4. Preview Cleaned Data\nprint(head(df_median_clean))\n\n\n# A tibble: 6 × 5\n  quarter town       flat_type  price date      \n  &lt;chr&gt;   &lt;chr&gt;      &lt;chr&gt;      &lt;dbl&gt; &lt;date&gt;    \n1 2007-Q2 ANG MO KIO 1-room        NA 2007-04-01\n2 2007-Q2 ANG MO KIO 2-room        NA 2007-04-01\n3 2007-Q2 ANG MO KIO 3-room    172000 2007-04-01\n4 2007-Q2 ANG MO KIO 4-room    260000 2007-04-01\n5 2007-Q2 ANG MO KIO 5-room    372000 2007-04-01\n6 2007-Q2 ANG MO KIO Executive     NA 2007-04-01\n\n\nCode\n# Remove missing values\ndf_median_final &lt;- df_median_clean |&gt;\n  filter(!is.na(price))\n\n\n\n\nCode\nlibrary(tidyverse)\nlibrary(naniar)\n\n# ---------------------------------------------------------\n# 1. Refined Plot: Missingness by Town\n# ---------------------------------------------------------\n# Since only 'price' is missing, we select only town and price.\n# This makes the plot cleaner (removes 0% bars for quarter/flat_type).\ndf_median_clean |&gt;\n  select(town, price) |&gt;\n  gg_miss_fct(fct = town) +\n  labs(title = \"Percentage of Missing Prices by Town (Market Gaps)\")\n\n\n\n\n\n\n\n\n\nCode\n# ---------------------------------------------------------\n# 2. Refined Plot: Missing Prices Over Time\n# ---------------------------------------------------------\ndf_median_clean |&gt;\n  filter(is.na(price)) |&gt; # Filter for missing rows first\n  group_by(quarter, flat_type) |&gt;\n  summarise(missing_count = n(), .groups = 'drop') |&gt;\n  ggplot(aes(x = quarter, y = missing_count, fill = flat_type)) +\n  geom_col() + \n  theme_minimal() +\n  labs(title = \"Count of Missing Prices per Quarter by Flat Type\",\n       y = \"Number of Missing Records\",\n       subtitle = \"High bars indicate quarters with few transactions\") +\n  theme(axis.text.x = element_text(angle = 90, hjust = 1))\n\n\n\n\n\n\n\n\n\nCode\n# ---------------------------------------------------------\n# 3. Heatmap: Town vs Flat Type\n# ---------------------------------------------------------\n# This visualizes your \"Top 10\" list in a single grid.\n# Darker squares = More missing prices (More gaps in data)\ndf_median_clean |&gt;\n  filter(is.na(price)) |&gt;\n  count(town, flat_type) |&gt;\n  ggplot(aes(x = flat_type, y = reorder(town, n), fill = n)) +\n  geom_tile() +\n  scale_fill_viridis_c(option = \"magma\", direction = -1) +\n  theme_minimal() +\n  labs(title = \"Heatmap of Missing Prices: Town vs. Flat Type\",\n       x = \"Flat Type\", \n       y = \"Town\", \n       fill = \"Missing Count\")\n\n\n\n\n\n\n\n\n\n\n2.2.1 Missing Data from first dataset\nThe missing data in the first dataset primarily arises from two scenarios: 1. Non-Availability of Flat Types in Certain Towns: Some towns do not have certain flat types available for purchase. For example, Bishan does not have 1-Room flats, leading to NA values in the dataset for that combination. 2. Lack of Transactions in Specific Quarters: In some quarters, there were no resale transactions for certain flat types in specific towns. This results in “-” entries in the dataset, indicating that while the flat type exists in that town, no sales occurred during that period.\nPlotting the graphs above helps visualize these gaps, showing which towns and flat types are most affected by missing data. Combining this with contextual knowledge of Singapore, the towns with the most missing data is Bukit Timah, Marine Parade and Central. Bukit Timah and Marine Parade are known to be more affluent areas with a higher concentration of private housing, which may explain the lack of HDB resale transactions. The Central area is also a prime location with a significant presence of private condominiums, leading to fewer HDB resale activities.\nWe can also begin to analyse the effects of government cooling measures on the HDB resale market through the missing data graph. This is likely an approximate inverse representation of the housing market, with peaks in missing data indicating quarters with low transaction volumes. There is noticeable increase in the 2013-2015 period, which coincides with the government’s first round of cooling measures in December 2013. A sharp spike is also observed in 2020 Q2, which aligns with the onset of the COVID-19 pandemic and the associated economic uncertainties that likely led to a temporary halt in property transactions. We will see a more detailed analysis of these events on the other aspects of the housing market later in the project.\n\n\nCode\n# Load second Dataset: Transaction-Level Resale Flat Prices (2017–Present)\ndf_transactions &lt;- read_csv(\"datasets/ResaleflatpricesbasedonregistrationdatefromJan2017onwards.csv\",\n                            na = c(\"na\", \"-\", \"NA\"))\n\n\nRows: 220809 Columns: 11\n── Column specification ────────────────────────────────────────────────────────\nDelimiter: \",\"\nchr (8): month, town, flat_type, block, street_name, storey_range, flat_mode...\ndbl (3): floor_area_sqm, lease_commence_date, resale_price\n\nℹ Use `spec()` to retrieve the full column specification for this data.\nℹ Specify the column types or set `show_col_types = FALSE` to quiet this message.\n\n\nCode\n# Check for Missing Values\nmissing_summary_transactions &lt;- df_transactions |&gt;\n  summarise(across(everything(), ~ sum(is.na(.)), .names = \"missing_{col}\"))\nprint(missing_summary_transactions)\n\n\n# A tibble: 1 × 11\n  missing_month missing_town missing_flat_type missing_block missing_street_name\n          &lt;int&gt;        &lt;int&gt;             &lt;int&gt;         &lt;int&gt;               &lt;int&gt;\n1             0            0                 0             0                   0\n# ℹ 6 more variables: missing_storey_range &lt;int&gt;, missing_floor_area_sqm &lt;int&gt;,\n#   missing_flat_model &lt;int&gt;, missing_lease_commence_date &lt;int&gt;,\n#   missing_remaining_lease &lt;int&gt;, missing_resale_price &lt;int&gt;\n\n\nCode\n# Clean Dataset\ndf_clean_transactions &lt;- df_transactions |&gt;\n  mutate(\n    # Ensure your column is actually named \"month\" (case-sensitive)\n    date = ym(month),\n    \n    # Ensure 'resale_price' and 'floor_area_sqm' are numeric\n    resale_price = as.numeric(resale_price),\n    floor_area_sqm = as.numeric(floor_area_sqm),\n    \n    # Standardize character columns to uppercase\n    town = toupper(town),\n    flat_type = toupper(flat_type),\n    \n    # --- PARSE 'remaining_lease' ---\n    lease_years = as.numeric(str_extract(remaining_lease, \"\\\\d+(?= years)\")),\n    lease_months = as.numeric(str_extract(remaining_lease, \"\\\\d+(?= months)\")),\n    lease_months = replace_na(lease_months, 0),\n    remaining_lease_years = lease_years + (lease_months / 12),\n    \n    # Extract the first number (start of range)\n    storey_lower = as.numeric(str_extract(storey_range, \"^\\\\d+\")),\n    # Extract the last number (end of range)\n    storey_upper = as.numeric(str_extract(storey_range, \"\\\\d+$\")),\n    # Calculate the average\n    storey_avg = (storey_lower + storey_upper) / 2,\n    \n    # --- NEW: Calculate Price Per Sqm ---\n    price_per_sqm = resale_price / floor_area_sqm\n  ) |&gt;\n  # Remove intermediate columns\n  select(-lease_years, -lease_months, -storey_lower, -storey_upper)\n\n# Preview Cleaned Data\nprint(head(df_clean_transactions))\n\n\n# A tibble: 6 × 15\n  month town  flat_type block street_name storey_range floor_area_sqm flat_model\n  &lt;chr&gt; &lt;chr&gt; &lt;chr&gt;     &lt;chr&gt; &lt;chr&gt;       &lt;chr&gt;                 &lt;dbl&gt; &lt;chr&gt;     \n1 2017… ANG … 2 ROOM    406   ANG MO KIO… 10 TO 12                 44 Improved  \n2 2017… ANG … 3 ROOM    108   ANG MO KIO… 01 TO 03                 67 New Gener…\n3 2017… ANG … 3 ROOM    602   ANG MO KIO… 01 TO 03                 67 New Gener…\n4 2017… ANG … 3 ROOM    465   ANG MO KIO… 04 TO 06                 68 New Gener…\n5 2017… ANG … 3 ROOM    601   ANG MO KIO… 01 TO 03                 67 New Gener…\n6 2017… ANG … 3 ROOM    150   ANG MO KIO… 01 TO 03                 68 New Gener…\n# ℹ 7 more variables: lease_commence_date &lt;dbl&gt;, remaining_lease &lt;chr&gt;,\n#   resale_price &lt;dbl&gt;, date &lt;date&gt;, remaining_lease_years &lt;dbl&gt;,\n#   storey_avg &lt;dbl&gt;, price_per_sqm &lt;dbl&gt;\n\n\nNow that we have cleaned the second dataset, we can see that there are no missing values in any of the columns. This indicates that the dataset is relatively complete and does not require further imputation or handling of missing data. We can proceed with our analysis using the two cleaned datasets above.\n\n\nCode\n# ---------------------------------------------------------\n# Save Objects for the Next QMD File\n# ---------------------------------------------------------\n\n# 1. Create a \"processed_data\" folder if it doesn't exist\nif(!dir.exists(\"processed_data\")) {\n  dir.create(\"processed_data\")\n}\n\n# 2. Save the cleaned dataframes as .rds files\n# using write_rds() preserves column types (dates, factors) and geometry (sf)\nwrite_rds(df_median_final, \"processed_data/df_median_final.rds\")\nwrite_rds(sg_map, \"processed_data/sg_map.rds\")\nwrite_rds(df_clean_transactions, \"processed_data/df_clean_transactions.rds\")\n\nprint(\"Data saved successfully to 'processed_data/' folder.\")\n\n\n[1] \"Data saved successfully to 'processed_data/' folder.\"",
    "crumbs": [
      "<span class='chapter-number'>2</span>  <span class='chapter-title'>Data</span>"
    ]
  },
  {
    "objectID": "results.html",
    "href": "results.html",
    "title": "3  Results",
    "section": "",
    "text": "3.1 Plots from Dataset 1 - Median Resale Prices",
    "crumbs": [
      "<span class='chapter-number'>3</span>  <span class='chapter-title'>Results</span>"
    ]
  },
  {
    "objectID": "results.html#plots-from-dataset-1---median-resale-prices",
    "href": "results.html#plots-from-dataset-1---median-resale-prices",
    "title": "3  Results",
    "section": "",
    "text": "3.1.1 Plot 1A: Trend of Average Median Resale Prices by Flat Type\nWe first plot the trend of average median resale prices by flat type over time to observe general price movements across different flat categories.\n\n\nCode\nlibrary(tidyverse)\n\n\nWarning: package 'lubridate' was built under R version 4.5.2\n\n\n── Attaching core tidyverse packages ──────────────────────── tidyverse 2.0.0 ──\n✔ dplyr     1.1.4     ✔ readr     2.1.5\n✔ forcats   1.0.0     ✔ stringr   1.5.2\n✔ ggplot2   4.0.0     ✔ tibble    3.3.0\n✔ lubridate 1.9.4     ✔ tidyr     1.3.1\n✔ purrr     1.1.0     \n── Conflicts ────────────────────────────────────────── tidyverse_conflicts() ──\n✖ dplyr::filter() masks stats::filter()\n✖ dplyr::lag()    masks stats::lag()\nℹ Use the conflicted package (&lt;http://conflicted.r-lib.org/&gt;) to force all conflicts to become errors\n\n\nCode\nlibrary(sf)\n\n\nWarning: package 'sf' was built under R version 4.5.2\n\n\nLinking to GEOS 3.13.1, GDAL 3.11.4, PROJ 9.7.0; sf_use_s2() is TRUE\n\n\nCode\nlibrary(lubridate)\nlibrary(naniar)\n\n\nWarning: package 'naniar' was built under R version 4.5.2\n\n\nCode\n# Load the pre-processed data\ndf_median_final      &lt;- read_rds(\"processed_data/df_median_final.rds\")\nsg_map               &lt;- read_rds(\"processed_data/sg_map.rds\")\ndf_clean_transactions &lt;- read_rds(\"processed_data/df_clean_transactions.rds\")\n\n# Plot 1A: Trend of Average Median Resale Prices by Flat Type \n# Compute average price per flat type over time\navg_price_trend &lt;- df_median_final |&gt;\n  group_by(date, flat_type) |&gt;\n  summarise(avg_price = mean(price, na.rm = TRUE)) |&gt;\n  ungroup()\n\n\n`summarise()` has grouped output by 'date'. You can override using the\n`.groups` argument.\n\n\nCode\n# Plot the trend\nggplot(avg_price_trend, aes(x = date, y = avg_price, color = flat_type)) +\n  geom_line() +\n  labs(title = \"Trend of Median Resale Prices by Flat Type\",\n       x = \"Date\",\n       y = \"Average Price (SGD)\",\n       color = \"Flat Type\") +\n  theme_minimal()\n\n\n\n\n\n\n\n\n\nAnalysis: As expected, larger flat types (e.g., 5-room, executive) generally command higher prices compared to smaller flat types (e.g., 2-room, 3-room). The plot for 2-room flats show a long straight line from 2007 to 2010 and then to 2020, indicating very few transactions during those periods, likely due to limited supply or demand for this flat type. The different flat types generally the same trend and rise and fall in tandem, suggesting that market-wide factors (e.g., economic conditions, government policies) influence prices across all flat categories similarly. Flat prices rose from 2007 to 2013, before decreasing/stagnating until around 2020, likely due to the aggressive property cooling measures put in place by the government. From 2020 onwards, there is a sharp increase in prices across all flat types, likely caused by limited housing supply from the delay to new housing projects during the COVID-19 pandemic, coupled with low interest rates that drove up demand.\n\n\n3.1.2 Plot 1B: Trend of 4-Room Resale Flat Prices in Selected Towns by Region\nNext, we focus on 4-room flats and examine their price trends across selected towns, grouped by region. This allows us to see regional variations while maintaining a common Y-axis for better comparison.\n\n\nCode\n# Plot 1B: Trend of 4-Room Resale Flat Prices in Selected Towns by Region\n# 1. Define Towns and Regions \nnorth_towns &lt;- c(\"WOODLANDS\", \"YISHUN\", \"SEMBAWANG\")\nnortheast_towns &lt;- c(\"SENGKANG\", \"HOUGANG\", \"PUNGGOL\")\neast_towns  &lt;- c(\"TAMPINES\", \"BEDOK\", \"PASIR RIS\")\nwest_towns  &lt;- c(\"JURONG WEST\", \"CHOA CHU KANG\", \"BUKIT BATOK\")\ncentral_towns &lt;- c(\"BISHAN\", \"TOA PAYOH\", \"GEYLANG\")\nselected_towns &lt;- c(north_towns, northeast_towns, east_towns, west_towns, central_towns)\n\n# Map towns to regions\nregion_map &lt;- data.frame(\n  town = selected_towns,\n  region = c(rep(\"North\", 3), rep(\"North-East\", 3), rep(\"East\", 3), rep(\"West\", 3), rep(\"Central\", 3))\n)\n\n# 2. Filter Data\ndf_4room_selected &lt;- df_median_final |&gt;\n  filter(flat_type == \"4-room\") |&gt;\n  filter(town %in% selected_towns) |&gt;\n  left_join(region_map, by = \"town\")\n\n# 3. Create Label Data (New Step)\n# We calculate the last data point for each town to know where to put the label\ntown_labels &lt;- df_4room_selected |&gt;\n  group_by(town) |&gt;\n  filter(date == max(date)) |&gt;\n  ungroup()\n\n# 4. Plotting\nggplot(df_4room_selected, aes(x = date, y = price, color = town)) +\n  geom_line(size = 1) +\n  # Add labels directly to the end of the lines\n  geom_text(data = town_labels, aes(label = town), \n            hjust = -0.1, size = 3, show.legend = FALSE) +\n  # Use facet_wrap without 'scales = \"free_y\"' to keep Y-axis common\n  facet_wrap(~region) + \n  # Expand the x-axis slightly to the right to make room for the text labels\n  scale_x_date(expand = expansion(mult = c(0.05, 0.4))) +\n  labs(\n    title = \"4-Room Resale Flat Prices by Region (15 Selected Towns)\",\n    subtitle = \"Quarterly Median Resale Prices (Common Y-Axis)\",\n    x = \"Year\",\n    y = \"Price (SGD)\"\n  ) +\n  theme_minimal() +\n  theme(\n    axis.text.x = element_text(angle = 45, hjust = 1),\n    legend.position = \"none\" # Remove the legend since lines are labeled directly\n  ) +\n  scale_y_continuous(labels = scales::comma)\n\n\nWarning: Using `size` aesthetic for lines was deprecated in ggplot2 3.4.0.\nℹ Please use `linewidth` instead.\n\n\n\n\n\n\n\n\n\nAnalysis: 4-room flats were chosen for analysis because they were the most common and popular flat type in Singapore, and the specific towns were selected because they had the largest population in their respective regions, making them a good representation of regional trends. The plot reveals disparities in price levels between the central region and the other regions, with central towns consistently commanding higher prices. This reflects the premium associated with central locations due to better accessibility and amenities. The East and North-East regions show a slightly higher price level compared to the North and West regions, likely due to some of the flats here being newer and close to the airport.\n\n\n3.1.3 Plot 1C: Choropleth Map of Average 4-Room Resale Flat Prices by Planning Area for Target Years\nFinally, we create a faceted choropleth map to visualize the spatial distribution of average 4-room resale flat prices across planning areas for selected target years.\n\n\nCode\n# Plot 1C: Choropleth Map of Average 4-Room Resale Flat Prices by Planning Area for Target Years\n# Process & Filter Price Data\n# We need to map HDB town names to URA Planning Area names\ntarget_years &lt;- c(2010, 2015, 2020, 2025)\n\ndf_map_data &lt;- df_median_final |&gt;\n  mutate(\n    price = as.numeric(price),\n    date = yq(quarter),\n    year = year(date),\n    town = toupper(town)\n  ) |&gt;\n  filter(flat_type == \"4-room\") |&gt;\n  filter(year %in% target_years) |&gt;\n  filter(!is.na(price)) |&gt;\n  # --- Crucial Step: Fix Name Mismatches ---\n  mutate(town = case_when(\n    town == \"KALLANG/WHAMPOA\" ~ \"KALLANG\",   # Map to closest major planning area\n    town == \"CENTRAL AREA\"    ~ \"DOWNTOWN CORE\",\n    TRUE ~ town\n  )) |&gt;\n  # Calculate average median price for the whole year\n  group_by(year, town) |&gt;\n  summarise(avg_price = mean(price, na.rm = TRUE)) |&gt;\n  ungroup()\n\n\n`summarise()` has grouped output by 'year'. You can override using the\n`.groups` argument.\n\n\nCode\n# 4. Prepare Geospatial Data for Faceting\n# To facet correctly (keeping empty regions grey), we create a grid of All Regions x All Years\nfull_grid &lt;- expand_grid(\n  name = unique(sg_map$name),\n  year = target_years\n)\n\n# Join the map shapes with the grid, then join the price data\nplot_data &lt;- full_grid |&gt;\n  left_join(sg_map, by = \"name\") |&gt;\n  st_as_sf() |&gt; # Convert back to sf object after join\n  left_join(df_map_data, by = c(\"name\" = \"town\", \"year\"))\n\n# 5. Plot the Faceted Choropleth Map\nggplot(plot_data) +\n  geom_sf(aes(fill = avg_price), color = \"white\", size = 0.2) +\n  facet_wrap(~year, ncol = 2) +\n  # Use a consistent scale across all facets\n  scale_fill_viridis_c(\n    option = \"magma\", \n    direction = -1,  # Darker colors = Higher prices\n    na.value = \"grey90\", \n    labels = scales::comma,\n    name = \"Avg Price (SGD)\"\n  ) +\n  labs(\n    title = \"Evolution of 4-Room Resale Flat Prices (2010 - 2025)\",\n    subtitle = \"Average Median Resale Price by Town\",\n    caption = \"Grey areas indicate no HDB resale data available for that year\"\n  ) +\n  theme_minimal() +\n  theme(\n    axis.text = element_blank(),\n    axis.ticks = element_blank(),\n    panel.grid = element_blank(),\n    legend.position = \"right\",\n    strip.text = element_text(size = 12, face = \"bold\")\n  )\n\n\n\n\n\n\n\n\n\nAnalysis: The faceted choropleth map illustrates the spatial distribution of average 4-room resale flat prices across planning areas for the years 2010, 2015, 2020, and 2025. Over this period, there is a clear trend of rising prices across most regions, with central areas consistently exhibiting higher prices compared to peripheral regions. The map also highlights areas with limited or no data (grey regions), indicating low transaction volumes or the absence of 4-room flats in those areas, with some regions being taken up by natural features like reservoirs or parks.",
    "crumbs": [
      "<span class='chapter-number'>3</span>  <span class='chapter-title'>Results</span>"
    ]
  },
  {
    "objectID": "results.html#plots-from-dataset-2---hdb-resale-flat-transactions",
    "href": "results.html#plots-from-dataset-2---hdb-resale-flat-transactions",
    "title": "3  Results",
    "section": "3.2 Plots from Dataset 2 - HDB Resale Flat Transactions",
    "text": "3.2 Plots from Dataset 2 - HDB Resale Flat Transactions\n\n3.2.1 Plot 2A: Lease Decay: Panel Plot\nFor the second dataset, we first analyze the lease-decay phenomenon in HDB resale prices using a panel plot of resale prices vs remaining lease, segmented by flat type.\n\n\nCode\n# Lease Decay: Panel Plot + GAM + Heatmap --------------------------\nlibrary(stringr)\nlibrary(mgcv)\n\n\nWarning: package 'mgcv' was built under R version 4.5.2\n\n\nLoading required package: nlme\n\n\n\nAttaching package: 'nlme'\n\n\nThe following object is masked from 'package:dplyr':\n\n    collapse\n\n\nThis is mgcv 1.9-4. For overview type '?mgcv'.\n\n\nCode\nmain_flats &lt;- c(\"3 ROOM\", \"4 ROOM\", \"5 ROOM\")\n\npanel_data &lt;- df_clean_transactions |&gt;\n  filter(flat_type %in% main_flats)\n\n# 3. Panel plot: resale price vs remaining lease, by flat type ----\n\nggplot(panel_data, aes(x = remaining_lease_years, y = resale_price)) +\n  geom_point(alpha = 0.05, size = 0.6) +\n  facet_wrap(~ flat_type, scales = \"free_y\") +\n  labs(\n    title = \"Lease Decay in HDB Resale Prices (2017–Present)\",\n    subtitle = \"Resale Price  vs remaining lease, by flat type\",\n    x = \"Remaining Lease (years)\",\n    y = \"Resale Price (SGD)\"\n  ) +\n  theme_minimal()\n\n\n\n\n\n\n\n\n\nAnalysis: Looking at the panel plots, it can be seen that there is a very big variance in the resale price for 3-room, 4-room nd 5-room flats, with a wide vertical spread of the points. As expected, the larger the flat, the higher the prices generally are. A general trend that can be observed is that there are blocks of flats being sold, flats with a remaining lease of 85-95 years and then flats with a remaining lease of about 40-80 years. This is likely due to a policy which stipulates new homeowners who purchase a brand new HDB abide by a minimum occupancy period (MOP) of 5-10 years, depending on the location of the flat, with flats in a better location having a longer MOP. This could explain the “increase” in prices as the remaining lease on a resale flat drops from 95 to 85 years, as most of the flats being sold with this amount of years remaining on the lease tend to be in prime locations such as the central region which command higher prices. Resale prices then generally fall as the remaining lease decreases below 80 years which reflect the loss in value of a flat as time goes on due to the leasehold nature of owning the property as well as the less modern build of the flat. However, there is a slight increase at around 50 years which may be the appeal of older houses typically having better locations from being built in a mature estate with more amenities.\n\n\n3.2.2 Plot 2B: GAM Curve of Lease Decay\nFor the second plot, we fit a Generalized Additive Model (GAM) to capture the smooth lease-decay relationship in resale prices per sqm, to compare 3-room, 4-room, and 5-room flats using a common standard, regardless of their absolute flat areas.\n\n\nCode\n# GAM curve: smooth lease-decay shape ---------------------------\nggplot(panel_data, aes(x = remaining_lease_years, y = price_per_sqm, color = flat_type)) +\n  # 2. Add the smooth curve based only on existing data\n  # method = \"gam\" calculates the curve for you automatically\n  geom_smooth(method = \"gam\", formula = y ~ s(x, bs = \"cs\"), se = FALSE, linewidth = 1.1) +\n  \n  labs(\n    title = \"Lease Decay: Price per Sqm\",\n    subtitle = \"Observed transactions and fitted trends (no extrapolation)\",\n    x = \"Remaining Lease (years)\",\n    y = \"Price per sqm (SGD)\",\n    color = \"Flat Type\"\n  ) +\n  theme_minimal()\n\n\n\n\n\n\n\n\n\nAnalysis: Looking at the smooth GAM curves for price per square meter, distinct trends emerge that differentiate the flat types beyond standard lease decay. The 5-room flats exhibit a pronounced “U-shaped” trajectory, commanding exceptionally high prices at low remaining lease levels (40–50 years), likely due to the scarcity of large floor plates in mature estates which outweighs the natural depreciation of the lease. A general “slump” is observed across all flat types between 65 and 80 years, representing a transition period where the flat loses its “newness” value but has not yet gained the vintage appeal of central locations. Interestingly, 3-room flats display the highest volatility, peaking sharply at the 85-year mark, which suggests that newly MOP-ed smaller units in prime locations command a significant premium per square meter despite their smaller overall quantum.\n\n\n3.2.3 Plot 2C: Lease Decay Heatmap\nFinally, we create a heatmap to visualize the median price per sqm across different flat types and binned remaining lease years.\n\n\nCode\n# 5. Heatmap: lease bins × flat type -------------------------------\n\nhdb_lease_decay &lt;- panel_data |&gt;\n  mutate(\n    lease_bin = cut(\n      remaining_lease_years,\n      breaks = seq(0, 100, by = 10),               # 10-year bins\n      include.lowest = TRUE,\n      right = FALSE,\n      labels = paste0(seq(0, 90, 10), \"-\", seq(10, 100, 10), \"y\")\n    )\n  ) |&gt;\n  group_by(flat_type, lease_bin) |&gt;\n  summarise(\n    median_psm = median(price_per_sqm, na.rm = TRUE),\n    n = n(),\n    .groups = \"drop\"\n  ) |&gt;\n  filter(n &gt;= 30)   # drop sparse tiles\n\nggplot(hdb_lease_decay, aes(x = lease_bin, y = flat_type, fill = median_psm)) +\n  geom_tile(color = \"white\") +\n  scale_fill_viridis_c(\n    option = \"magma\",\n    direction = -1,\n    labels = scales::comma,\n    name = \"Median Price\\n(SGD per sqm)\"\n  ) +\n  labs(\n    title = \"Lease Decay Heatmap (HDB Resale Prices, 2017–Present)\",\n    subtitle = \"Median price per sqm by flat type and 10-year remaining lease bands\",\n    x = \"Remaining Lease (years, binned)\",\n    y = \"Flat Type\"\n  ) +\n  theme_minimal() +\n  theme(\n    axis.text.x = element_text(angle = 45, hjust = 1),\n    panel.grid = element_blank()\n  )\n\n\n\n\n\n\n\n\n\nAnalysis: The heatmap provides a clear visual representation of how median price per square meter varies across different flat types and remaining lease bands. Darker tiles indicate higher prices, and we can observe that for all flat types, the highest median prices per sqm are generally concentrated in the 80-90 year remaining lease band due to the reasons listed above.\n\n\n3.2.4 Plot 2D: Million-Dollar HDB Flats by Town and Year\nNext, we analyze the distribution of million-dollar HDB resale flats by town and year using a dodged bar chart.\n\n\nCode\nmillion_flats &lt;- df_clean_transactions |&gt;\n  filter(resale_price &gt;= 1000000)\n# 1. Prepare the data with a 'year' column\nmillion_by_town_year &lt;- million_flats |&gt;\n  mutate(year = year(date)) |&gt;              # Extract year from date\n  group_by(year, town) |&gt;                   # Group by the new year column, not date\n  summarise(n = n(), .groups = \"drop\") |&gt;\n  # Filter logic (keep towns with &gt;= 5 transactions total)\n  group_by(town) |&gt;\n  mutate(total_n = sum(n)) |&gt;\n  ungroup() |&gt;\n  filter(total_n &gt;= 5)\n\n# 2. Plot\nggplot(million_by_town_year, aes(x = reorder(town, n), y = n, fill = factor(year))) +\n  geom_col(position = \"dodge\") +            # 'dodge' places bars side-by-side\n  coord_flip() +\n  labs(\n    title = \"Million-Dollar HDB Resale Flats by Town and Year\",\n    subtitle = \"Towns with at least 5 million-dollar transactions total\",\n    x = \"Town\",\n    y = \"Number of Million-Dollar Transactions\",\n    fill = \"Year\"\n  ) +\n  theme_minimal()\n\n\n\n\n\n\n\n\n\nAnalysis: The plot shows that million-dollar HDB resale flats are highly concentrated in a small number of towns. Mature, centrally located estates such as Toa Payoh, Bukit Merah and Queenstown dominate the count each year, while most towns rarely register any million-dollar transactions. Over time, the number of million dollar resale flats generally increases, suggesting that “luxury HDB” units are becoming more common despite repeated cooling measures, a phenomenon that has been commonly reported on in Singaporean news, likely due to a wealthier middle and upper class who can afford these more expensive flats in a premium location.\n\n\n3.2.5 Plot 2E: Million-Dollar HDB Flats on a Map\nNext, we create a choropleth map to visualize the spatial distribution of million-dollar HDB resale flats by town.\n\n\nCode\n# 1. Count million-dollar flats per town (all years combined)\nmillion_by_town &lt;- million_flats |&gt;\n  group_by(town) |&gt;\n  summarise(n = n(), .groups = \"drop\")\n\n# 2. Fix mismatched names to align with sg_map\nmillion_by_town &lt;- million_by_town |&gt;\n  mutate(\n    town_for_map = case_when(\n      town == \"KALLANG/WHAMPOA\" ~ \"KALLANG\",\n      town == \"CENTRAL AREA\"    ~ \"DOWNTOWN CORE\",\n      TRUE ~ town\n    )\n  )\n\n# 3. Join with spatial data\nsg_map_join &lt;- sg_map |&gt;\n  left_join(million_by_town, by = c(\"name\" = \"town_for_map\"))\n\n# 4. Compute centroids for point plotting\ncentroids &lt;- sg_map_join |&gt;\n  st_centroid() |&gt;\n  filter(!is.na(n))   # keep only towns with at least 1 million-dollar flat\n\n\nWarning: st_centroid assumes attributes are constant over geometries\n\n\nCode\n# 5. Plot: base map + points sized by count\nggplot() +\n  geom_sf(data = sg_map, fill = \"grey95\", color = \"white\", linewidth = 0.2) +\n  geom_sf(data = sg_map_join, color = \"white\", linewidth = 0.2) +\n  scale_fill_viridis_c(\n    option = \"magma\",\n    direction = -1,\n    na.value = \"grey90\",\n    name = \"Million-Dollar\\nHDB Resales\"\n  ) +\n  geom_sf(data = centroids, aes(size = n), color = \"red\", alpha = 0.8) +\n  scale_size_continuous(name = \"Number of\\nMillion-Dollar Flats\") +\n  labs(\n    title = \"Spatial Concentration of Million-Dollar HDB Flats\",\n    subtitle = \"Counts aggregated over 2017–Present\",\n    caption = \"Circles sized by number of million-dollar transactions; grey areas indicate no such transactions\"\n  ) +\n  theme_minimal() +\n  theme(\n    axis.text = element_blank(),\n    axis.ticks = element_blank(),\n    panel.grid = element_blank(),\n    legend.position = \"right\"\n  )\n\n\n\n\n\n\n\n\n\nAnalysis: Figure 2E highlights the spatial clustering of million-dollar HDB flats. Only a handful of towns register a substantial number of million-dollar transactions, and these are predominantly in central or city-fringe regions. Peripheral towns in the North, West, and far East see few or no such sales, reinforcing the idea that location — rather than flat size alone — is a key driver of “luxury” HDB pricing.\n\n\n3.2.6 Plot 2F: Scatterplot of Floor Area vs Resale Price, Highlighting Million-Dollar Flats\nSubsequently, we create a scatterplot to examine the relationship between floor area and resale price, highlighting million-dollar flats in red.\n\n\nCode\n# For performance, you can optionally downsample non-million points\nset.seed(123)\nnon_million_sample &lt;- df_clean_transactions |&gt;\n  filter(resale_price &lt; 1000000) |&gt;\n  sample_frac(0.15)   # 15% sample to keep the plot light; adjust as needed\n\nggplot() +\n  geom_point(\n    data = non_million_sample,\n    aes(x = floor_area_sqm, y = resale_price),\n    alpha = 0.15,\n    size = 0.6\n  ) +\n  geom_point(\n    data = million_flats,\n    aes(x = floor_area_sqm, y = resale_price),\n    color = \"red\",\n    alpha = 0.8,\n    size = 1.6\n  ) +\n  scale_y_continuous(labels = scales::comma) +\n  labs(\n    title = \"Are Million-Dollar HDB Flats Just Bigger?\",\n    subtitle = \"Floor area vs resale price, highlighting million-dollar transactions\",\n    x = \"Floor Area (sqm)\",\n    y = \"Resale Price (SGD)\"\n  ) +\n  theme_minimal()\n\n\n\n\n\n\n\n\n\nAnalysis: Figure 2F shows the relationship between floor area and resale price. Million-dollar flats (in red) tend to cluster in the upper-right region of the scatterplot, indicating that they are generally larger and more expensive than typical units. However, there is also overlap with non-million-dollar flats of similar size, suggesting that location and flat attributes (storey, orientation, proximity to MRT/amenities) likely push certain units over the million-dollar threshold, rather than size alone.\n\n\n3.2.7 Plot 2G: Boxplot of Price per Sqm vs Storey Height\nNext, we create a Boxplot to analyze the relationship between price per square meter and storey height of HDB flats.\n\n\nCode\nggplot(df_clean_transactions, aes(x = factor(storey_avg), y = price_per_sqm)) +\n  # 1. The Box Plot \n  geom_boxplot(\n    outlier.shape = 1,       # Hollow circles for outliers\n    outlier.alpha = 0.3,     # Transparency for outliers\n    fill = \"white\",          # White box background\n    color = \"black\"          # Black lines\n  ) +\n  scale_y_continuous(labels = scales::comma) +\n  labs(\n    title = \"Boxplot of Price per Sqm vs Storey Height\",\n    x = \"Average Storey Height\",\n    y = \"Resale Price per Sqm (SGD)\"\n  ) +\n  theme_minimal()\n\n\n\n\n\n\n\n\n\nAnalysis: The boxplot reveals that flats located on higher storeys generally command a higher price per square meter compared to those on lower storeys. This trend is likely due to the enhanced views, reduced noise levels, and perceived prestige associated with higher floors. However, there are also outliers in the lower storey categories, indicating that some lower-floor flats can still achieve high prices per sqm, possibly due to other factors such as location within the estate or flat condition. In terms of outliers, the interquartile spread for the lower storeys (1-10) is smaller but with many outliers in the higher price per sqm range, indicating that while most lower storey flats are cheaper, there are exceptions likely due to location or flat condition. Higher storeys (20 and above) show a generally wider interquartile range but not as many extreme outliers, suggesting a more consistent premium for higher floors.",
    "crumbs": [
      "<span class='chapter-number'>3</span>  <span class='chapter-title'>Results</span>"
    ]
  },
  {
    "objectID": "conclusion.html",
    "href": "conclusion.html",
    "title": "4  Conclusion",
    "section": "",
    "text": "This project has provided a deep dive into the factors influencing resale prices in the Singapore HDB market. By analysing various features such as location, flat type, flat area, remaining lease, and storey height, we illustrated how these elements contribute to the overall pricing dynamics. Our exploratory data analysis revealed significant trends and patterns, notably the premium associated with certain locations and flat types. Notably, location emerged as a critical determinant of resale prices, an analysis that is further confirmed by contextual knowledge of Singapore’s MOP policy resulting in a spike in flats sold around with around 90 years of remaining lease. Limitations of the study include the absence of more granular data on flat conditions and amenities such as the flat’s interior condition or proximity to public transport and schools, all of which could further refine price predictions. Future research could incorporate these additional variables and explore advanced modeling techniques to develop a model that can accurately predict resale prices based on a comprehensive set of features. Overall, this project underscores the complexity of the HDB resale market and highlights the importance of multifaceted analysis in understanding real estate pricing trends and we learnt the importance of data cleaning and preprocessing in ensuring the reliability of our findings.",
    "crumbs": [
      "<span class='chapter-number'>4</span>  <span class='chapter-title'>Conclusion</span>"
    ]
  }
]